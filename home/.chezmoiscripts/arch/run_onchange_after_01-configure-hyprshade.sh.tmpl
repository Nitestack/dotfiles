#!/usr/bin/env bash

# {{ template "bash-library.sh" . }}

# The following line is for ShellCheck to correctly identify the above included library
true || source "../../.chezmoitemplates/bash-library.sh"

# ~/.dotfiles/home/private_dot_config/hypr/hyprshade.toml hash: {{ include "private_dot_config/exact_hypr/hyprshade.toml" | sha256sum }}

_spin "Installing systemd units for hyprshade" -- hyprshade install

_log -l info "Checking if hyprshade is set up to run weekly"

# Check if hyprshade automation has not been set up yet
if systemctl --user is-enabled --quiet hyprshade.timer; then
	_log -l warn "hyprshade is already set up"
	exit
fi

# Run weekly
_spin "Enabling hyprshade timer" -- systemctl --user enable hyprshade.timer

# Start immediately
_spin "Starting hyprshade" -- systemctl --user start hyprshade.timer

_log -l info "Set up hyprshade to run weekly"
