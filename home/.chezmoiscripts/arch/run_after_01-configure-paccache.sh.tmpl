#!/usr/bin/env bash

# {{ template "bash-library.sh" . }}

# The following line is for ShellCheck to correctly identify the above included library
true || source "../../.chezmoitemplates/bash-library.sh"

configure_paccache() {
	# Check if paccache automation has not been set up yet
	if systemctl is-enabled --quiet paccache.timer; then
		echo "Arch Linux: paccache automation is already set up"
		exit 2
	else
		# Run weekly
		sudo systemctl enable paccache.timer

		# Start immediately
		sudo systemctl start paccache.timer
	fi
}

show_spinner "configure_paccache" "Arch Linux: Checking if paccache automation is configured" "Arch Linux: Configured paccache automation"
