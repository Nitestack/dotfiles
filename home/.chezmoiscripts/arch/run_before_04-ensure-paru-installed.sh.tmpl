#!/usr/bin/env bash

# {{ template "bash-library.sh" . }}

# The following line is for ShellCheck to correctly identify the above included library
true || source "../../.chezmoitemplates/bash-library.sh"

ensure_paru_installed() {
	# Check if paru is already installed
	if pacman -Qs paru &>/dev/null; then
		echo "Arch Linux: paru is already installed"
		exit 2
	fi

	# Install paru
	(
		git clone https://aur.archlinux.org/paru.git ~/paru-git
		cd ~/paru-git || exit 1
		makepkg -si --noconfirm
		rm -rf ~/paru-git
	)
}

show_spinner "ensure_paru_installed" "Arch Linux: Checking if paru is installed" "Arch Linux: paru is installed"
