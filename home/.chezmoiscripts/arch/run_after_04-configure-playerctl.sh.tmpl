#!/usr/bin/env bash

# {{ template "bash-library.sh" . }}

# The following line is for ShellCheck to correctly identify the above included library
true || source "../../.chezmoitemplates/bash-library.sh"

_log -l info "Checking if playerctld is set up to run on boot"

# Check if playerctl automation has not been set up yet
if systemctl --user is-enabled --quiet playerctld.service; then
	_log -l warn "playerctld is already set up"
	exit
fi

# Run on boot
_spin "Enabling playerctld service" -- systemctl --user enable playerctld.service

# Start immediately
_spin "Starting playerctld" -- systemctl --user start playerctld.service

_log -l info "Set up playerctld to run on boot"
